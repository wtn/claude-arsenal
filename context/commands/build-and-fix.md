# /build-and-fix

Run builds and systematically fix all errors.

## Usage

```
/build-and-fix
```

## What This Command Does

This command runs relevant build commands for modified files and systematically fixes any errors found.

1. Detects which files were modified
2. Runs appropriate build tools (TypeScript, Ruby, etc.)
3. Collects all errors
4. Systematically fixes each error
5. Re-runs builds to verify fixes

## Build Tools Detected

**TypeScript/JavaScript:**
- `npx tsc --noEmit` - Type checking
- Reports type errors with file and line numbers

**Ruby:**
- `ruby -c [file]` - Syntax checking
- Optionally: `bundle exec rubocop` - Linting

**Additional:**
- Detects test frameworks and can run affected tests
- Checks for linters in package.json or Gemfile

## Example

```
/build-and-fix
```

Output:
```
¨ Running TypeScript compiler...
Found 3 errors:

1. src/user.ts:45 - Type 'string | null' is not assignable to type 'string'
2. src/auth.ts:12 - Property 'email' does not exist on type 'User'
3. src/service.ts:78 - Argument of type 'unknown' is not assignable

Fixing error 1/3...
 Fixed: Added null check before assignment

Fixing error 2/3...
 Fixed: Updated User interface to include email property

Fixing error 3/3...
 Fixed: Added type assertion with validation

¨ Re-running build...
 All errors fixed! Build passes.
```

## Workflow

1. **Detect errors:** Runs build tools automatically
2. **Prioritize:** Fixes in logical order
3. **Fix systematically:** One error at a time
4. **Verify:** Re-runs build after fixes
5. **Report:** Shows what was fixed and why

## Integration

Works with:
- **Hooks:** `build-checker` stop hook can trigger this
- **Commands:**
  - `/code-review` - Review before fixing
  - `/test-affected` - Run tests after fixing

## Options

You can specify which build to run:

```
/build-and-fix typescript
/build-and-fix ruby
/build-and-fix all
```

## Notes

- Focuses on build/type errors, not logic bugs
- Fixes are conservative and safe
- May ask for confirmation on complex fixes
- Preserves existing functionality

## Tips

**Before running:**
- Commit working code first
- Run after making significant changes
- Use in combination with code review

**After running:**
- Review the fixes made
- Run tests to ensure nothing broke
- Consider if fixes could be improved

---

*Generated by: Claude Arsenal*
*Integrates with: build-checker hook*
